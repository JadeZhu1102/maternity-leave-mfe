# 增强版产假计算器 - 使用指南

## 🎯 设计理念

### 核心优化点
1. **操作简单** - 卡片式布局，分步引导
2. **快速高效** - 智能默认值，减少输入
3. **完整展示** - 所有条件一目了然，实时反馈

---

## ✨ 主要特性

### 1. 可视化进度
```
┌─────────────────────────────────┐
│ 填写进度              [75%]     │
│ ████████████░░░░░░░░            │
│ ● 基本信息 → ● 生育情况 → ...  │
└─────────────────────────────────┘
```
- 实时显示完成度百分比
- 步骤导航清晰
- 已完成步骤显示✓标记

### 2. 智能表单

#### 基本信息卡片
```
┌─────────────────────────────────┐
│ 📅 基本信息              ✓      │
├─────────────────────────────────┤
│ 员工姓名: [张三]                │
│ 所在城市: [北京]                │
│   提示: 标准产假：158天         │
│ 预产期: [2024-06-01]            │
│ 休假开始: [2024-03-01]          │
│   提示: 可在预产期前90天开始    │
└─────────────────────────────────┘
```

#### 生育情况卡片
```
┌─────────────────────────────────┐
│ 👶 生育情况                ℹ️   │
├─────────────────────────────────┤
│ 生育类型: *                     │
│ [正常分娩] [难产+15] [多胎+15] [流产] │
│                                  │
│ 难产详情:                        │
│ ⚠️ 难产额外假期：15天            │
│ 包括：剖宫产、产钳助产...        │
│                                  │
│ 分娩顺序: [第一胎 ▼]            │
└─────────────────────────────────┘
```

#### 社保信息（可选折叠）
```
┌─────────────────────────────────┐
│ 💰 社保信息（可选） [用于计算津贴] ▼ │
├─────────────────────────────────┤
│ 社保缴费基数: ¥ [10000]         │
│   提示: 单位上年度职工月平均工资 │
│ 公司实际工资: ¥ [12000]         │
│   提示: 用于计算公司补差         │
│                                  │
│ ℹ️ 生育津贴 = 社保基数÷30×天数   │
│    公司补差 = (公司-社保)÷30×天数│
└─────────────────────────────────┘
```

### 3. 实时政策说明

```
┌─────────────────────────────────┐
│ 北京 政策说明                    │
├─────────────────────────────────┤
│ 基础产假                         │
│ 98天（国家规定）                 │
│                                  │
│ 延长产假                         │
│ 60天（地方规定）                 │
│                                  │
│ 总产假天数                       │
│ 158天                            │
│ ─────────────────────────────    │
│ 额外假期                         │
│ • 难产：+15天                    │
│ • 多胎：+15天/胎                 │
│ • 陪产假：15天                   │
└─────────────────────────────────┘
```

### 4. 结果展示

```
┌─────────────────────────────────┐
│ ✅ 计算结果                      │
├─────────────────────────────────┤
│ 总产假天数                       │
│     173天                        │
│                                  │
│ 假期明细                         │
│ 基础产假：98天                   │
│ 延长产假：60天                   │
│ 难产假：+15天                    │
│ ─────────────────────────────    │
│ 休假时间                         │
│ 开始：2024-03-01                 │
│ 结束：2024-08-21                 │
│ ─────────────────────────────    │
│ 生育津贴                         │
│ ¥57,666.67                       │
│ 公司补差：¥11,533.33             │
└─────────────────────────────────┘
```

---

## 🎨 UI/UX 优化详情

### 1. 布局优化

#### 响应式设计
- **桌面端**：左右分栏（7:5），表单在左，说明在右
- **移动端**：单列布局，自动堆叠

#### 卡片式设计
- 每个功能模块独立卡片
- 清晰的视觉层次
- 阴影和圆角提升质感

### 2. 交互优化

#### 智能提示
```typescript
// 城市选择后立即显示政策
选择"北京" → 提示"标准产假：158天"

// 日期选择智能限制
预产期：2024-06-01
休假开始：最早 2024-03-03（预产期前90天）

// 生育类型显示额外天数
[难产 +15天] [多胎 +15天/胎]
```

#### 实时验证
- 必填项未填写时禁用计算按钮
- 输入错误立即提示
- 步骤完成显示✓标记

#### 快捷操作
- Toggle Button 快速选择生育类型
- 数字输入框带步进器
- 下拉菜单带搜索（城市）

### 3. 视觉优化

#### 颜色系统
```
主色调：蓝色（专业、信任）
成功色：绿色（完成、正确）
警告色：橙色（注意、提示）
信息色：浅蓝（说明、帮助）
```

#### 图标使用
- 📅 日历 - 基本信息
- 👶 婴儿 - 生育情况
- 🏥 医院 - 难产说明
- 💰 钱包 - 社保信息
- ✅ 对勾 - 完成状态
- ℹ️ 信息 - 帮助提示

#### 字体层级
```
H3 (32px) - 页面标题
H6 (20px) - 卡片标题
H5 (24px) - 重要数字
Body1 (16px) - 正文
Body2 (14px) - 说明
Caption (12px) - 辅助信息
```

---

## 🔄 操作流程

### 标准流程（3步完成）
```
1. 填写基本信息（必填）
   ├─ 员工姓名
   ├─ 所在城市
   ├─ 预产期
   └─ 休假开始日期
   
2. 选择生育情况（默认正常）
   ├─ 正常分娩（默认）
   ├─ 难产（+15天）
   ├─ 多胎（+15天/胎）
   └─ 流产（按周数）
   
3. 点击"计算产假"
   └─ 查看结果
```

### 完整流程（含津贴计算）
```
1-2. 同标准流程

3. 展开社保信息（可选）
   ├─ 填写社保基数
   └─ 填写公司基数
   
4. 点击"计算产假"
   └─ 查看结果（含津贴）
```

---

## 📊 功能对比

### 旧版 vs 新版

| 功能 | 旧版 | 新版 |
|------|------|------|
| 布局 | 单列表单 | 左右分栏 |
| 进度 | 无 | 可视化进度条 |
| 政策说明 | 需点击查看 | 实时显示 |
| 生育类型 | 多个复选框 | Toggle Button |
| 社保信息 | 混在表单中 | 可折叠区域 |
| 结果展示 | 简单列表 | 卡片式详情 |
| 移动端 | 体验一般 | 完全优化 |

### 操作步骤对比

| 场景 | 旧版 | 新版 |
|------|------|------|
| 正常分娩 | 7步 | 4步 |
| 难产 | 9步 | 5步 |
| 多胎 | 10步 | 6步 |
| 含津贴 | 12步 | 8步 |

---

## 🎯 使用场景

### 场景1：员工自助查询
```
张三想知道自己能休多少天产假

操作：
1. 输入姓名"张三"
2. 选择城市"北京"
3. 选择预产期"2024-06-01"
4. 选择休假开始"2024-03-01"
5. 点击"计算产假"

结果：
✅ 总产假：158天
   开始：2024-03-01
   结束：2024-08-05
```

### 场景2：HR批量计算
```
HR需要为多名员工计算产假

操作：
1. 填写第一位员工信息
2. 点击"计算产假"
3. 查看结果
4. 点击"重置"
5. 重复1-4步

优化：
- 城市可保持不变（同城市员工）
- 快速切换生育类型
- 一键重置清空数据
```

### 场景3：复杂情况计算
```
李四是难产+多胎，需要计算津贴

操作：
1. 填写基本信息
2. 选择"难产"（自动显示+15天）
3. 选择"多胎"，输入婴儿数量"2"
4. 展开社保信息
5. 填写社保基数"10000"
6. 填写公司基数"12000"
7. 点击"计算产假"

结果：
✅ 总产假：188天
   基础：98天
   延长：60天
   难产：+15天
   多胎：+15天
   
   生育津贴：¥62,666.67
   公司补差：¥12,533.33
```

---

## 🚀 集成方式

### 1. 路由配置

```typescript
// src/App.tsx
import EnhancedCalculator from './pages/EnhancedCalculator';

<Route path="/calculator-enhanced" element={<EnhancedCalculator />} />
```

### 2. 导航菜单

```typescript
// 添加到导航菜单
{
  label: '产假计算器（增强版）',
  path: '/calculator-enhanced',
  icon: <CalculateIcon />,
}
```

### 3. 替换旧版

```typescript
// 如果要完全替换旧版
<Route path="/calculator" element={<EnhancedCalculator />} />
```

---

## 📝 待优化项

### 短期优化
- [ ] 添加保存功能（保存到历史记录）
- [ ] 添加打印功能（打印计算结果）
- [ ] 添加分享功能（生成分享链接）
- [ ] 添加导出功能（导出PDF报告）

### 中期优化
- [ ] 智能推荐（根据历史数据推荐）
- [ ] 批量计算（Excel导入导出）
- [ ] 模板功能（保存常用配置）
- [ ] 对比功能（对比不同城市）

### 长期优化
- [ ] AI助手（智能问答）
- [ ] 语音输入（语音填写表单）
- [ ] OCR识别（拍照识别证件）
- [ ] 日历集成（同步到个人日历）

---

## 💡 最佳实践

### 1. 数据验证
```typescript
// 预产期不能是过去
minDate={new Date()}

// 休假开始不能早于预产期前90天
minDate={state.expectedDate?.subtract(90, 'day')}

// 婴儿数量限制
inputProps={{ min: 2, max: 5 }}
```

### 2. 用户引导
```typescript
// 进度提示
{nextStepHint && <p>{nextStepHint}</p>}

// 帮助信息
<Tooltip title="选择实际生育情况">
  <InfoIcon />
</Tooltip>

// 政策说明
helperText="可在预产期前90天开始休假"
```

### 3. 性能优化
```typescript
// 使用 useMemo 缓存计算结果
const cityPolicy = useMemo(() => {
  return getCityPolicy(state.cityCode);
}, [state.cityCode]);

// 防抖处理
const debouncedCalculate = useDebouncedCallback(
  handleCalculate,
  500
);
```

---

## 🎓 总结

增强版产假计算器通过以下优化，大幅提升了用户体验：

1. **视觉优化** - 卡片式布局，清晰美观
2. **交互优化** - 智能提示，实时反馈
3. **流程优化** - 分步引导，快速完成
4. **功能优化** - 完整展示，一目了然

**核心价值：让复杂的产假计算变得简单、快速、准确！**
